
@model Sotis2.Models.DTO.QuestionWithAnswaresDTO
<!--

    ViewData["Title"] = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";

-->

<hr />
<!--using (Html.BeginForm("CreateFullTest", "Tests", FormMethod.Post, new { id = "form1" })){-->
<div id="f @Model.ID">
    <p><b>Question: </b> @Html.TextBoxFor(model => model.QuestionText)</p>

    @for (int i = 0; i < Model.Answares.Count(); i++)
    {
        <div id="@i.ToString()">
            <partial class="partial" name="AnswareEditor" for="@Model.Answares[i]" />
        </div>
    }

    <input type="button" value="Add new Answare" id="Add @Model.ID" />
</div>
<br />
<!--}-->


@section scripts{
    <script>
        var i = 0;
        $("#Add"+String(@Model.ID)).click(function () {
            $.ajax({
                url: '/Tests/AnswareEditor',
                data: { i: i },
                success: function (data) {
                    str = JSON.stringify(data);
                    const newDiv = document.createElement("div");
                    newDiv.id = i;
                    newDiv.innerHTML += data;

                    $("#f " + @Model.ID).append(newDiv);//.append(data); //f+(i-1)
                    /*did = document.getElementById("ID");
                    did.setAttribute("Id", "Answares_" + i + "__ID");
                    did.setAttribute("name", "Answares[" + i + "].ID");

                    at = document.getElementById("AnswareText");
                    at.setAttribute("Id", "Answares_" + i + "__AnswareText");
                    at.setAttribute("name", "Answares[" + i + "].AnswareText");

                    iit = document.getElementById("IsItTrue");
                    iit.setAttribute("Id", "Answares_" + i + "__IsItTrue");
                    iit.setAttribute("name", "Answares[" + i + "].IsItTrue");
                    */

                    //old_did = document.getElementById("ID");
                    //document.replaceChild(did, old_did);
                    //i = i + 1;
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert(xhr.status);
                }
            })
            i++;
        })
    </script>
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

}
<!--
<div class="form-group">
    <a value="Create" class="btn btn-primary" asp-action="FullCreate"> Submit</a>
</div>
-->
